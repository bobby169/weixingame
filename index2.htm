
<!doctype html>
<html lang="cn">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="css/game.css" />
	<title></title>
	  <style type="text/css">
          p{
              display: none;
          }
            .wrap{position:relative;width:580px;height:326px;margin:0 auto;border:1px
            solid #ccc;margin-top:50px;} 
			#fall{position:absolute;top:0;left:0; height: 100%;}
        </style>
</head>
<body>
<div id="warp">
	<div id="stage">
        <div id="bg"></div>
		<div id="man"></div>

        <p>
            横向初速度：
            <input id="Vx" type="text" value="5" />
            px/ms
        </p>
        <p>
            纵向初速度：
            <input id="Vy" type="text" value="-3" />
            px/ms
        </p>
        <p>
            重力加速度：
            <input id="a" type="text" value="0.0098" />
            px/平方ms
        </p>
        <p>
            （如果这个加速度是一个随时间变化的值，就能达到其他非匀加速运动的效果了。）
        </p>
        <p>
            单位时间：
            <input id="t" type="text" value="2" />
            （记录运动的时间间隔）
            <p>
            </p>
			<p>
            <strong>最好用chrome观看demo,你懂的...<br />
			By <a href="http://nonb.cn">写点寂寞</a> @Author:Fzxa</strong>
			</p>
                <canvas id="ctx" width="580" height="326" style="border:1px solid #000;  margin-top:15px; display: none">

                </canvas>
				<div id="fall">
                       <img src="images/ling.png" style="position:absolute; left:140px; bottom:110px; width:45px "/>
                </div>
        <input style="position: absolute;top:0;left:0; z-index: 999" type="button" value="演示" onclick="demo(document.getElementById('Vx').value, document.getElementById('Vy').value, document.getElementById('a').value, document.getElementById('t').value)"
                />

	</div>
</div>
	<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="js/easeljs-0.7.1.min.js"></script>
	<script type="text/javascript">

	

   function demo(x, y, a, t) {
    var bg = document.getElementById("bg");
    var stage = document.getElementById("stage");
    var f = document.getElementById('fall');
	/*
    var Vx = x,
    Vy = parseInt(y),
    g = a,
    t = parseInt(t),
    h = 0,
    l = 0,
    Sx = 0,
    Sy = 0;
	*/
	var Vx = x,
    Vy = parseInt(y),
    g = a,
    t = parseInt(t),
    h = 0,
    l = 0,
    Sx = 0,
    Sy = 0;

    var bb = 0;
	console.log('Vx:'+Vx+' Vy:'+Vy+' g:'+g+' t:'+t+' h:'+h+' l:'+l+' Sx:'+Sx+' Sy:'+Sy); 
    var i = setInterval(function() {
        if (f) {
            bb -=20;
            Sx += Vx * t;
            l = Sx;
            Vy += g * t;
            h += Vy * t;
			console.log('X轴:'+l+'    Y轴:'+h+'   Vy:'+Vy); 
            f.style.left = l + 'px';
            stage.style.left = -l + 'px';
            f.style.top = h-Vy + 'px';
            bg.style.left = bb +'px';
            if (h>=-2) {
				Vy *= (Vy > 1) ? -0.6 : 0;
				if(Vy == 0) clearInterval(i);
			}
        }
    },
    t);
}
	</script>
	
</body>
</html>